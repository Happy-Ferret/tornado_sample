<html>
<head>
	<title>Popup</title>
    <link href="../static/css/popup.css" rel="stylesheet" />
</head>
<body>
	<hr/>
	Hello a demo custom popup which can post to a form:<br/>
	based on this <a href='http://stackoverflow.com/questions/1328723/how-to-generate-a-simple-popup-using-jquery'>SO post</a><br/>

	<hr/>
	<a href="/contact" class="contact">Click Here</a>
	<a href="/contact" class="contact">Click Here</a>
	<a href="/contact" class="contact">Click Here</a>
	<a href="/contact" class="contact">Click Here</a>

	<div class="messagepop pop">
	    <form method="post" id="new_message" action="javascript:do_post()">
	        <p>
        		<!-- <label for="body">Message</label> -->
        		<div id='bodydiv'>
		        	<textarea rows="2" name="body" id="body" ></textarea>
		        	<span id="body_at_name"> - @andy</span>
		        </div>
	        </p>
	        <p><input type="submit" value="Send Message" name="commit" id="message_submit"/> or <a class="close" href="/">Cancel</a></p>
	    </form>
	</div>

    <script src="/static/js/jquery-1.7.2.min.js"></script>
	<script>
		function do_post() {
			alert('send message not wired up');
		}
		function deselect() {
		    $(".pop").slideFadeToggle(function() { 
		        $(".contact").removeClass("selected");
		    });    
		}

		$(function() {
		    $(".contact").live('click', function() {
		        if($(this).hasClass("selected")) {
		            deselect();               
		        } else {
		            $(this).addClass("selected");
		            $(".pop").slideFadeToggle(function() { 
		                $("#body").focus();
		            });
		        }
		        return false;
		    });

		    $(".close").live('click', function() {
		        deselect();
		        return false;
		    });
		});

		$.fn.slideFadeToggle = function(easing, callback) {
		    return this.animate({ opacity: 'toggle', height: 'toggle' }, "fast", easing, callback);
		};
	</script>

</body>
</html>
